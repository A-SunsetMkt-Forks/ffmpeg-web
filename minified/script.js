if("serviceWorker"in navigator){let e;const b=async()=>{e=await navigator.serviceWorker.register("./service-worker.js")};b()}else console.error(":/");let jsonImg={toload:!0},appVersion="1.0.1",conversionOptions=(fetch("./updatecode.txt",{cache:"no-store"}).then(e=>e.text().then(e=>{e.replace("\n","")!==appVersion&&confirm(`There's a new version of ffmpeg-web. Do you want to update? [${appVersion} --> ${e.replace("\n","")}]`)&&(caches.delete("ffmpegweb-cache"),location.reload(!0))}).catch(e=>{console.error(e)})).catch(e=>console.error(e)),document.getElementById("version").textContent=appVersion,{videoOptions:{codec:null,bitrateType:"0",bitrateLength:"22",fps:-1},audioOptions:{codec:null,bitrateType:"0",bitrateLength:"4",channels:-1},output:{name:"output",vidExtension:null,audExtension:"mp4",orientation:-1,custom:!1,merged:!1}}),isMultiCheck=(document.getElementById("btnSelect").addEventListener("click",()=>{document.getElementById("btnSelect").classList.contains("disabled")?createAlert("Wait until ffmpeg is loaded.","ffmpegLoadRemind"):document.getElementById("fileInput").click()}),[!1,0]);function ffmpegMultiCheck(){var o=document.getElementById("fileInput").files;if(isMultiCheck[1]>=o.length)document.getElementById("reset").reset(),createAlert("Executed conversion of all selected files :D","convertAll"),isMultiCheck=[!1,0];else if(3===parseInt(document.getElementById("multiVideoHandle").value)){let n=!1;for(let t=isMultiCheck[1];t<o.length;t++){for(let e=isMultiCheck[1];e<o.length;e++)if(o[t].name!==o[e].name&&o[t].name.substring(0,o[t].name.lastIndexOf("."))===o[e].name.substring(0,o[e].name.lastIndexOf("."))){n=!0,conversionOptions.output.name=o[t].name.substring(0,o[t].name.lastIndexOf(".")),isMultiCheck[1]=t+1,loadFile(o[t]),loadFile(o[e]),ffmpegStart();break}if(n)break}}else loadFile(o[isMultiCheck[1]]),conversionOptions.output.name=o[isMultiCheck[1]].name.substring(0,o[isMultiCheck[1]].name.lastIndexOf(".")),isMultiCheck[1]+=1,ffmpegStart()}async function mergeContent(e){let t="";var n,o,i=[];for(n of e)t+=`
file '${n.name}'`,ffmpeg.FS("writeFile",n.name,await fetchFile(n)),i.push(n.name);t=t.substring(1),await ffmpeg.FS("writeFile","array.txt",(new TextEncoder).encode(t)),""===document.getElementById("mergeName").value&&(document.getElementById("mergeName").value="merged-"+e[0].name),document.getElementById("mergeName").value.endsWith(".m4a")?await ffmpeg.run("-f","concat","-safe","0","-i","array.txt","-c","copy","-map_metadata","0","-vn","a"+document.getElementById("mergeName").value):await ffmpeg.run("-f","concat","-safe","0","-i","array.txt","-c","copy","-map_metadata","0","a"+document.getElementById("mergeName").value);let a=await ffmpeg.FS("readFile","a"+document.getElementById("mergeName").value),l=(i.push("a"+document.getElementById("mergeName").value),"a");if(document.getElementById("keepAlbumArt").checked)try{await ffmpeg.run("-i",e[0].name,"temp.jpg"),await ffmpeg.run("-i","a"+document.getElementById("mergeName").value,"-i","temp.jpg","-map","0","-map","1","-c","copy","-disposition:v:0","attached_pic","aa"+document.getElementById("mergeName").value),a=ffmpeg.FS("readFile","aa"+document.getElementById("mergeName").value),i.push("aa"+document.getElementById("mergeName").value,"temp.jpg"),l="aa"}catch(e){console.error(e)}try{await ffmpeg.run("-i",""+l+document.getElementById("mergeName").value,"-i",e[0].name,"-map","0","-map_metadata","1","-c","copy","aaa"+document.getElementById("mergeName").value),a=ffmpeg.FS("readFile","aaa"+document.getElementById("mergeName").value),i.push("aaa"+document.getElementById("mergeName").value)}catch(e){console.error(e)}document.getElementById("console").innerHTML=consoleText,document.getElementById("console").parentElement.scrollTo({top:document.getElementById("console").parentElement.scrollHeight,behavior:"smooth"}),downloadItem(a,document.getElementById("mergeName").value);for(o of i)await ffmpeg.FS("unlink",o);tempOptions=optionGet()}async function ffmpegStart(){(conversionOptions.output.custom?readFfmpegScript:buildFfmpegScript)();let t=[];tempOptions.itsscale!==[]&&t.push(...tempOptions.itsscale);for(let e=0;e<tempOptions.ffmpegBuffer.length;e++)ffmpeg.FS("writeFile",tempOptions.ffmpegName[e],await fetchFile(tempOptions.ffmpegBuffer[e])),conversionOptions.output.custom&&-1!==tempOptions.ffmpegArray.indexOf(`$input[${e}]`)?tempOptions.ffmpegArray[tempOptions.ffmpegArray.indexOf(`$input[${e}]`)]=tempOptions.ffmpegName[e]:t.push("-i",tempOptions.ffmpegName[e]),tempOptions.deleteFile.push(tempOptions.ffmpegName[e]);t.push(...tempOptions.ffmpegArray),await ffmpeg.run(...t);let e="a",n=(conversionOptions.output.custom&&(conversionOptions.output.name=tempOptions.ffmpegArray[tempOptions.ffmpegArray.length-1].substring(0,tempOptions.ffmpegArray[tempOptions.ffmpegArray.length-1].lastIndexOf(".")),tempOptions.fileExtension=tempOptions.ffmpegArray[tempOptions.ffmpegArray.length-1].substring(tempOptions.ffmpegArray[tempOptions.ffmpegArray.length-1].lastIndexOf(".")+1),e=""),ffmpeg.FS("readFile",""+e+conversionOptions.output.name+"."+tempOptions.fileExtension));if(tempOptions.deleteFile.push(""+e+conversionOptions.output.name+"."+tempOptions.fileExtension),document.getElementById("albumArtCheck").checked&&"ogg"!==conversionOptions.output.audExtension)try{await ffmpeg.run("-i",tempOptions.ffmpegName[0],"temp.jpg"),await ffmpeg.run("-i",""+e+conversionOptions.output.name+"."+tempOptions.fileExtension,"-i","temp.jpg","-map","0","-map","1","-c","copy","-disposition:v:0","attached_pic",`aa${conversionOptions.output.name}.`+tempOptions.fileExtension),n=ffmpeg.FS("readFile",`aa${conversionOptions.output.name}.`+tempOptions.fileExtension),tempOptions.deleteFile.push("temp.jpg",`aa${conversionOptions.output.name}.`+tempOptions.fileExtension)}catch(e){console.error(e)}downloadItem(n),document.getElementById("console").innerHTML=consoleText,document.getElementById("console").parentElement.scrollTo({top:document.getElementById("console").parentElement.scrollHeight,behavior:"smooth"});for(var o of tempOptions.deleteFile)await ffmpeg.FS("unlink",o);tempOptions=optionGet(),isMultiCheck[0]?setTimeout(()=>{t=[],ffmpegMultiCheck()},350):document.getElementById("reset").reset()}function downloadItem(e,t){let n=conversionOptions.output.name+"."+tempOptions.fileExtension;void 0!==t&&(n=t),document.getElementById("zipSave").checked?(zip.file(n,new File([e.buffer],n)),createAlert(`Added ${n} to zip file`,"zipFileAdd")):((t=document.createElement("a")).href=URL.createObjectURL(new File([e.buffer],n)),t.download=n,t.textContent="Download here",t.setAttribute("ref",linkStore.length),t.click(),document.getElementById("saveFiles").checked?((e=document.createElement("option")).textContent=t.download,e.value=linkStore.length,e.style="display: block; text-align: center;",e.setAttribute("ref",e.value),document.getElementById("redownloadVideos").append(e),linkStore.push(t)):URL.revokeObjectURL(t.href))}document.getElementById("fileInput").addEventListener("input",()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});var t=document.getElementById("fileInput").files,n=(document.getElementById("mergeName").value.endsWith(".alac")&&(document.getElementById("mergeName").value=document.getElementById("mergeName").value.substring(0,document.getElementById("mergeName").value.length-5)+".m4a"),[]);if("cmd"===document.querySelector(".sectionSelect").getAttribute("section")?conversionOptions.output.custom=!0:conversionOptions.output.custom=!1,"merge"===document.querySelector(".sectionSelect").getAttribute("section")?conversionOptions.output.merged=!0:conversionOptions.output.merged=!1,"inline"!==document.getElementById("redownload").style.display&&scrollItem(),conversionOptions.output.merged)mergeContent(t);else{switch(parseInt(document.getElementById("multiVideoHandle").value)){case 1:break;case 2:for(let e=1;e<t.length;e++)t[0].name.substring(0,t[0].name.lastIndexOf("."))===t[e].name.substring(0,t[e].name.lastIndexOf("."))&&n.push(t[e],t[0]);break;case 3:case 4:return isMultiCheck[0]=!0,void ffmpegMultiCheck();default:n.push(t[0])}for(var e of n)loadFile(e);ffmpegStart()}});let linkStore=[];function loadFile(e){tempOptions.ffmpegBuffer.push(e),tempOptions.ffmpegName.push(e.name)}document.getElementById("redownloadVideos").addEventListener("input",()=>{document.getElementById("linkContainer").innerHTML="",document.getElementById("linkContainer").append(linkStore[parseInt(document.getElementById("redownloadVideos").value)]),document.getElementById("memDelete").style.display="block"}),document.getElementById("memDelete").addEventListener("click",()=>{URL.revokeObjectURL(linkStore[parseInt(document.getElementById("redownloadVideos").value)].href),linkStore[parseInt(document.getElementById("redownloadVideos").value)]=void 0,document.querySelector(`[ref='${parseInt(document.getElementById("redownloadVideos").value)}']`).remove(),document.getElementById("redownloadVideos").value=-1,document.getElementById("memDelete").style.display="none;"});let isAudBitrateShown=!0;for(let e of document.querySelectorAll("[data-audioval]"))e.addEventListener("click",()=>{switch(e.getAttribute("data-audioval")){case"libopus":1!==document.querySelector("[data-child=aud]").value&&(generalByeAnimation(document.getElementById("audQuantization")),document.getElementById("audManual").style.display="flex",generalHelloAnimation(document.getElementById("audManual")),document.querySelector("[data-child=aud]").value=1),conversionOptions.audioOptions.bitrateType=1,document.getElementById("sliderAudio").disabled=!0,isAudBitrateShown||(generalHelloAnimation(document.getElementById("audioBitrateSettings"),!0),isAudBitrateShown=!0);break;case"no":isAudBitrateShown=!1,generalByeAnimation(document.getElementById("audioBitrateSettings"));break;default:document.getElementById("sliderAudio").disabled=!1,isAudBitrateShown||(generalHelloAnimation(document.getElementById("audioBitrateSettings"),!0),isAudBitrateShown=!0)}"ogg"===e.getAttribute("data-extension")?generalByeAnimation(document.getElementById("albumArtContainer")):generalHelloAnimation(document.getElementById("albumArtContainer"),!0),conversionOptions.audioOptions.codec=e.getAttribute("data-audioval"),conversionOptions.output.audExtension=e.getAttribute("data-extension"),null!==document.querySelector(".audSelect")&&document.querySelector(".audSelect").classList.remove("audSelect"),e.classList.add("audSelect")});for(let e of document.querySelectorAll("[data-imgval]"))e.addEventListener("click",()=>{null!==document.querySelector(".imgSelect")&&document.querySelector(".imgSelect").classList.remove("imgSelect"),e.classList.add("imgSelect"),conversionOptions.output.vidExtension=e.getAttribute("data-extension")});for(let e of document.querySelectorAll("[data-videoval]"))e.addEventListener("click",()=>{conversionOptions.videoOptions.codec=e.getAttribute("data-videoval"),conversionOptions.output.vidExtension=e.getAttribute("data-extension"),null!==document.querySelector(".vidSelect")&&document.querySelector(".vidSelect").classList.remove("vidSelect"),e.classList.add("vidSelect"),"copy"===e.getAttribute("data-videoval")?document.getElementById("fpsContainerDiv").style.display="none":document.getElementById("fpsContainerDiv").style.display="inline"});for(let e of document.querySelectorAll("[data-select=bitrate]"))e.addEventListener("change",()=>{"0"==e.value?(document.getElementById(e.getAttribute("data-child")+"Quantization").style.display="flex",document.getElementById(e.getAttribute("data-child")+"Manual").style.display="none"):(document.getElementById(e.getAttribute("data-child")+"Quantization").style.display="none",document.getElementById(e.getAttribute("data-child")+"Manual").style.display="flex"),"aud"===e.getAttribute("data-child")?conversionOptions.audioOptions.bitrateType=e.value:conversionOptions.videoOptions.bitrateType=e.value});for(let e of document.querySelectorAll("[data-update=audBitLength]"))e.addEventListener("input",()=>{conversionOptions.audioOptions.bitrateLength=e.value});for(let e of document.querySelectorAll("[data-update=vidBitLength]"))e.addEventListener("input",()=>{conversionOptions.videoOptions.bitrateLength=e.value});function optionGet(){return{ffmpegArray:[],ffmpegBuffer:[],ffmpegName:[],fileExtension:"mp4",itsscale:[],deleteFile:[]}}document.getElementById("fpsInput").addEventListener("input",()=>{conversionOptions.videoOptions.fps=document.getElementById("fpsInput").value,document.getElementById("fpsTarget").min=conversionOptions.videoOptions.fps/2});let tempOptions=optionGet();function getFilter(n){let e="";for(var o of Object.keys(n)){let t=!0;for(let e=0;e<n[o].ref.length;e++)for(var i of n[o].nochange[e].split(","))i===n[o].ref[e]&&(t=!1);t&&(e+=","+n[o].format)}return e}function buildFfmpegScript(){if(document.getElementById("vidOutput").checked||"imgenc"===document.querySelector(".sectionSelect").getAttribute("section")){function t(e){return""!==e.value&&0!==parseInt(e.value)}"imgenc"!==document.querySelector(".sectionSelect").getAttribute("section")?(tempOptions.ffmpegArray.push("-vcodec",conversionOptions.videoOptions.codec),0===parseInt(conversionOptions.videoOptions.bitrateType)?tempOptions.ffmpegArray.push("-qscale:v",conversionOptions.videoOptions.bitrateLength):tempOptions.ffmpegArray.push("-b:v",conversionOptions.videoOptions.bitrateLength),-1!==conversionOptions.videoOptions.fps&&("copy"!==conversionOptions.videoOptions.codec?tempOptions.ffmpegArray.push("-vf","fps="+conversionOptions.videoOptions.fps):tempOptions.itsscale.push("-itsscale",parseInt(document.getElementById("fpsInput").value)/parseInt(document.getElementById("fpsTarget").value)))):"no"!==document.querySelector(".imgSelect").getAttribute("data-imgval")&&tempOptions.ffmpegArray.push("-vcodec",document.querySelector(".imgSelect").getAttribute("data-imgval")),document.getElementById("checkOrientation").checked&&t(document.getElementById("inputWidth"))&&t(document.getElementById("inputHeight"))&&tempOptions.ffmpegArray.push("-aspect",document.getElementById("inputWidth").value+"/"+document.getElementById("inputHeight").value);let e=getFilter({crop:{ref:[document.getElementById("cropWidth").value,document.getElementById("cropHeight").value,document.getElementById("positionItemX").value,document.getElementById("positionItemY").value],nochange:["","","",""],format:`crop=${document.getElementById("cropWidth").value}:${document.getElementById("cropHeight").value}:${document.getElementById("positionItemX").value.replaceAll("center-w",`(iw-${document.getElementById("cropWidth").value})/2`).replaceAll("center-h",`(ih-${document.getElementById("cropHeight").value})/2`)}:`+document.getElementById("positionItemY").value.replaceAll("center-w",`(iw-${document.getElementById("cropWidth").value})/2`).replaceAll("center-h",`(ih-${document.getElementById("cropHeight").value})/2`)},yaidf:{ref:[document.getElementById("deinterlaceCheck").checked.toString()],nochange:["false"],format:"yadif=0:0:0"},curves:{ref:[document.getElementById("curveSelect").value],nochange:["none,"],format:"curves="+document.getElementById("curveSelect").value},custom:{ref:[document.getElementById("customVideo").value],nochange:[""],format:document.getElementById("customVideo").value}});-1!==conversionOptions.output.orientation&&(e+=`,rotate=PI*${conversionOptions.output.orientation}:oh=iw:ow=ih`),0<e.length&&(e=e.substring(1),tempOptions.ffmpegArray.push("-filter:v",e)),document.getElementById("checkPixelSpace").checked&&""!==document.getElementById("pixelSpace").value&&tempOptions.ffmpegArray.push("-pix_fmt",document.getElementById("pixelSpace").value)}else("imgenc"===document.querySelector(".sectionSelect").getAttribute("section")||document.getElementById("albumArtCheck").checked)&&"libfdk_aac"!==conversionOptions.audioOptions.codec&&"alac"!==conversionOptions.audioOptions.codec&&"aac"!==conversionOptions.audioOptions.codec&&"ogg"!==conversionOptions.output.audExtension||tempOptions.ffmpegArray.push("-vn");if(document.getElementById("audOutput").checked&&"imgenc"!==document.querySelector(".sectionSelect").getAttribute("section")){"no"!==conversionOptions.audioOptions.codec&&tempOptions.ffmpegArray.push("-acodec",conversionOptions.audioOptions.codec),0===parseInt(conversionOptions.audioOptions.bitrateType)?tempOptions.ffmpegArray.push("-qscale:a",conversionOptions.audioOptions.bitrateLength):tempOptions.ffmpegArray.push("-b:a",conversionOptions.audioOptions.bitrateLength),-1!==conversionOptions.audioOptions.channels&&tempOptions.ffmpegArray.push("-ac",conversionOptions.audioOptions.channels);let e=getFilter({volume:{ref:[document.getElementById("volumeRange").value],nochange:["0"],format:`volume=${document.getElementById("volumeRange").value}dB`},denoise:{ref:[document.getElementById("noiseLevelReduction").value,document.getElementById("noiseFloorReduction").value],nochange:["0,","0,"],format:`afftdn=nr=${document.getElementById("noiseLevelReduction").value}:nf=`+document.getElementById("noiseFloorReduction").value},custom:{ref:[document.getElementById("customAudio").value],nochange:[""],format:document.getElementById("customAudio").value}});0<e.length&&(e=e.substring(1),tempOptions.ffmpegArray.push("-filter:a",e))}"output"===conversionOptions.output.name&&(conversionOptions.output.name=tempOptions.ffmpegName[0].substring(0,tempOptions.ffmpegArray[0].lastIndexOf("."))),"copy"===conversionOptions.videoOptions.codec&&document.getElementById("vidOutput").checked?tempOptions.fileExtension=tempOptions.ffmpegName[0].substring(tempOptions.ffmpegName[0].lastIndexOf(".")+1):null!==conversionOptions.output.vidExtension?tempOptions.fileExtension=conversionOptions.output.vidExtension:"copy"===conversionOptions.audioOptions.codec?tempOptions.fileExtension=tempOptions.ffmpegName[0].substring(tempOptions.ffmpegName[0].lastIndexOf(".")+1):tempOptions.fileExtension=conversionOptions.output.audExtension,tempOptions.ffmpegArray.push(`a${conversionOptions.output.name}.`+tempOptions.fileExtension)}const{createFFmpeg,fetchFile}=FFmpeg;let ffmpeg=createFFmpeg({log:!1,corePath:"https://unpkg.com/@ffmpeg/core@0.11.0/dist/ffmpeg-core.js"}),progressMove=!0,consoleText="";function checkShow(n,o,i){document.getElementById(n).addEventListener("input",()=>{let t=null;t=i?!document.getElementById(n).checked:document.getElementById(n).checked;for(let e of o.split(","))t?(document.getElementById(e).style.display="","a"===document.getElementById(e).getAttribute("block")&&(document.getElementById(e).style.display="block"),generalHelloAnimation(document.getElementById(e)),setTimeout(()=>{document.getElementById(e).style.maxHeight="9999px"},50)):(document.getElementById(e).style.maxHeight="0px",document.getElementById(e).classList.remove("animate__backInUp"),document.getElementById(e).classList.add("animate__animated","animate__backOutDown"),setTimeout(()=>{(!i&&document.getElementById(n).checked||i&&!document.getElementById(n).checked)&&document.getElementById(e).classList.remove("animate__animated","animate__backOutDown"),document.getElementById(e).style.display="none"},1050))})}ffmpeg.setLogger(({type:e,message:t})=>{consoleText+=`<br>[${e}] `+t,progressMove&&(document.getElementById("console").innerHTML=consoleText,progressMove=!1,document.getElementById("console").parentElement.scrollTo({top:document.getElementById("console").parentElement.scrollHeight,behavior:"smooth"}),setTimeout(()=>{progressMove=!0},600))}),ffmpeg.setProgress(({ratio:e})=>{document.getElementById("progress").value=Math.floor(100*e)}),document.querySelector("[section=reenc]").addEventListener("click",()=>{setTimeout(()=>{document.getElementById("onlyVidSettings").style.display="block"},1100)}),document.getElementById("vidOutput").addEventListener("input",()=>{document.getElementById("vidOutput").checked?(document.getElementById("audioOpt").classList.remove("leftCard"),document.getElementById("audioOpt").classList.add("rightCard")):(document.getElementById("audioOpt").classList.remove("rightCard"),document.getElementById("audioOpt").classList.add("leftCard"))});let showItem=[["vidOutput","audOutput","checkFps","checkOrientation","checkPixelSpace"],["videoElementsDisplay,videoOpt","audioElementsDisplay,audioOpt","fpsDiv","orientationDiv","pixelSpaceDiv"],[!1,!1,!0,!1,!1]];for(let e=0;e<showItem[0].length;e++)checkShow(showItem[0][e],showItem[1][e],showItem[2][e]);let fetchImg=null;for(let e of document.querySelectorAll("[data-fetch]"))fetchData(e,e.getAttribute("data-fetch"));function fetchData(e,t,n){void 0===n&&(n=getComputedStyle(document.body).getPropertyValue("--select")),null===fetchImg?setTimeout(()=>{fetchData(e,t,n)},150):e.src=URL.createObjectURL(new Blob([fetchImg[t].replaceAll("#212121",n)],{type:"image/svg+xml"}))}fetch("./assets/mergedAssets.json").then(e=>{e.json().then(e=>{fetchImg=e}).catch(e=>{console.warn(e)})}).catch(e=>{console.warn(e)});let dialogShow=[[document.getElementById("showFilter"),document.getElementById("hideFilter"),document.getElementById("hideFilter2"),document.getElementById("showFilter2"),document.getElementById("showSettings"),document.getElementById("hideSettings")],[document.getElementById("audioFilterDialog"),document.getElementById("audioFilterDialog"),document.getElementById("videoFilterDialog"),document.getElementById("videoFilterDialog"),document.getElementById("settings"),document.getElementById("settings")],["block","none","none","block","block","none"]];for(let e=0;e<dialogShow[0].length;e++)dialogShow[0][e].addEventListener("click",()=>{"none"!==dialogShow[2][e]?(dialogShow[1][e].classList.remove("animate__backOutDown"),dialogShow[1][e].classList.add("animate__animated","animate__backInDown"),dialogShow[1][e].style.display=dialogShow[2][e]):(dialogShow[1][e].classList.remove("animate__backInDown"),dialogShow[1][e].classList.add("animate__animated","animate__backOutDown"),setTimeout(()=>{dialogShow[1][e].classList.contains("animate__backInDown")||(dialogShow[1][e].style.display=dialogShow[2][e])},1050))});function updateSelectInformation(e,t){let n=t.split(".");document.getElementById(e).addEventListener("input",()=>{conversionOptions[n[0]][n[1]]=parseFloat(document.getElementById(e).value)})}let selectInfo=[["audioChannelSelect","orientationChoose"],["audioOptions.channels","output.orientation"]];for(let e=0;e<selectInfo[0].length;e++)updateSelectInformation(selectInfo[0][e],selectInfo[1][e]);let pixelFormatChosen=!1;function readFfmpegScript(){for(var e of document.getElementById("ffmpegScript").value.split(" "))tempOptions.ffmpegArray.push(e.replaceAll("$space"," "))}function sectionRefer(){return{reenc:{id:[document.getElementById("reencOpt"),document.getElementById("videoOpt"),document.getElementById("audioOpt"),document.getElementById("onlyVidSettings")],visible:[!0,document.getElementById("vidOutput").checked,document.getElementById("audOutput").checked,!0],value:4},cmd:{id:[document.getElementById("customSection")],visible:[!0],value:-1},merge:{id:[document.getElementById("mergeSection")],visible:[!0],value:-1},imgenc:{id:[document.getElementById("imgSection"),document.getElementById("onlyVidSettings")],visible:[!0,!1],value:4}}}function generalByeAnimation(e){e.classList.remove("animate__backInUp"),e.classList.add("animate__animated","animate__backOutDown"),setTimeout(()=>{e.style.display="none",e.classList.remove("animate__animated","animate__backOutDown")},1050)}function generalHelloAnimation(e,t){t&&(e.style.display="block"),e.classList.remove("animate__backOutDown"),e.classList.add("animate__animated","animate__backInUp"),setTimeout(()=>{e.classList.remove("animate__animated","animate__backInUp")},1050)}document.getElementById("curveSelect").addEventListener("input",()=>{"none"!==document.getElementById("curveSelect").value||pixelFormatChosen?pixelFormatChosen||(document.getElementById("pixelSpaceDiv").style.display="flex",document.getElementById("pixelSpace").value="yuv420p",document.getElementById("checkPixelSpace").checked=!0):(document.getElementById("pixelSpaceDiv").style.display="none",document.getElementById("pixelSpace").value="",document.getElementById("checkPixelSpace").checked=!1)}),document.getElementById("checkPixelSpace").addEventListener("input",()=>{pixelFormatChosen=!0}),window.scrollTo({top:0,behavior:"smooth"});for(let e of document.querySelectorAll(["[section]"]))e.addEventListener("click",()=>{document.querySelector(".sectionSelect").classList.remove("sectionSelect"),e.classList.add("sectionSelect");let n=sectionRefer();for(let t in n)if(t===e.getAttribute("section"))setTimeout(()=>{for(let e=0;e<n[t].id.length;e++)n[t].visible[e]?generalHelloAnimation(n[t].id[e],!0):generalByeAnimation(n[t].id[e])},1045);else for(let e=0;e<n[t].id.length;e++)generalByeAnimation(n[t].id[e]);document.getElementById("multiVideoHandle").value=n[Object.keys(n)[Object.keys(n).indexOf(e.getAttribute("section"))]].value,-1===parseInt(document.getElementById("multiVideoHandle").value)?document.getElementById("multiVideoHandle").disabled=!0:document.getElementById("multiVideoHandle").disabled=!1,"imgenc"===e.getAttribute("section")&&setTimeout(()=>{generalHelloAnimation(document.getElementById("videoOpt"),!0)},1100),checkPosition("reenc"===e.getAttribute("section"))});document.querySelector("[data-fetch=arrowright]").addEventListener("click",()=>{scrollItem()}),document.querySelector("[data-fetch=arrowleft]").addEventListener("click",()=>{scrollItem(!0)});let zip=new JSZip,previousLink=(document.getElementById("zipSave").addEventListener("input",()=>{document.getElementById("zipSave").checked?(generalByeAnimation(document.getElementById("redownloadPart")),setTimeout(()=>{generalHelloAnimation(document.getElementById("zipPart"),!0)},1040)):(generalByeAnimation(document.getElementById("zipPart")),setTimeout(()=>{generalHelloAnimation(document.getElementById("redownloadPart"),!0)},1040))}),void 0);function addHoverEvents(e){e.addEventListener("mouseenter",()=>{e.classList.add("isHovered")}),e.addEventListener("mouseleave",()=>{e.classList.add("byeHover"),setTimeout(()=>{e.classList.remove("byeHover")},310)})}document.getElementById("downloadZip").addEventListener("click",()=>{zip.generateAsync({type:"blob"}).then(function(e){void 0!==previousLink&&URL.revokeObjectURL(previousLink);var t=document.createElement("a");t.textContent="Having trouble downloading? Click here",t.href=URL.createObjectURL(new Blob([e])),t.style="text-align: center; display: block;",t.download="ffmpeg-web.zip",t.click(),document.getElementById("troubleContainer").innerHTML="",document.getElementById("troubleContainer").appendChild(t)})}),document.getElementById("cleanZip").addEventListener("click",()=>{zip=new JSZip});for(let e of document.querySelectorAll("input,.button,select,.optionBtn,.isHovered,.slider,img,.circular"))addHoverEvents(e);if("a"===localStorage.getItem("ffmpegWeb-advanced")&&(document.getElementById("advancedFormat").checked=!0),!document.getElementById("advancedFormat").checked)for(let e of document.querySelectorAll("[advanced]"))e.style.display="none";function checkPosition(e){e||document.getElementById("vidOutput").checked&&document.getElementById("audOutput").checked||!document.getElementById("vidOutput").checked&&!document.getElementById("audOutput").checked?(document.getElementById("scrollableItem").classList.remove("rightCard"),document.getElementById("scrollableItem").classList.add("width100")):(document.getElementById("scrollableItem").classList.add("rightCard"),document.getElementById("scrollableItem").classList.remove("width100")),window.innerWidth<800&&document.getElementById("scrollableItem").classList.remove("limitWidth"),!document.getElementById("vidOutput").checked&&document.getElementById("audOutput").checked?(document.getElementById("audioOpt").classList.remove("rightCard"),document.getElementById("audioOpt").classList.add("leftCard")):(document.getElementById("audioOpt").classList.add("rightCard"),document.getElementById("audioOpt").classList.remove("leftCard")),generalHelloAnimation(document.getElementById("scrollableItem"))}document.getElementById("advancedFormat").addEventListener("input",()=>{if(document.getElementById("advancedFormat").checked){for(var e of document.querySelectorAll("[advanced]"))e.style.display="flex";localStorage.setItem("ffmpegWeb-advanced","a")}else{for(var t of document.querySelectorAll("[advanced]"))t.style.display="none";localStorage.setItem("ffmpegWeb-advanced","b")}});for(let e of["vidOutput","audOutput"])document.getElementById(e).addEventListener("input",()=>{checkPosition()});let defaultThemes={themes:[{name:"Dracula Dark",color:{text:"#fcf7f2",background:"#282a36",card:"#44475A",row:"#787b90",input:"#a1a4ba",select:"#30abb6"},custom:"a0"},{name:"Simple Dark",color:{text:"#fcf7f2",background:"#191919",card:"#393939",row:"#6b6b6b",input:"#eadb5a",select:"#e2b54c"},custom:"a1"},{name:"Simple Light",color:{text:"#171717",background:"#f5f5f5",card:"#d3d3d3",row:"#b9b9b9",input:"#e24b4d",select:"#c03b43"},custom:"a2"}]},customTheme={themes:[]},storageItem=localStorage.getItem("ffmpegWeb-customThemes"),finalObj=(null!==storageItem&&-1!==storageItem.indexOf('themes":')&&(customTheme=JSON.parse(storageItem)),{themes:[]});for(let e=0;e<defaultThemes.themes.length;e++)finalObj.themes.push(defaultThemes.themes[e]);for(let e=0;e<customTheme.themes.length;e++)finalObj.themes.push(customTheme.themes[e]);for(let e of finalObj.themes)addTheme(e);function addTheme(o){let e=document.createElement("div");e.classList.add("colorSelect");var t=document.createElement("div"),n=(t.style="display: flex; float: left; height: 100%",document.createElement("l"));function i(e){var t=document.createElement("div"),n=(t.classList.add("circular"),t.style.backgroundColor=o.color.card,document.createElement("img"));return fetchData(n,e,o.color.select),n.style="width: 15px; height: 15px;",t.append(n),addHoverEvents(t),t}n.textContent=o.name,n.classList.add("textName");var a,l=i("export"),s=(l.addEventListener("click",()=>{var e=document.createElement("a");e.href=URL.createObjectURL(new Blob([JSON.stringify(o)])),e.download=o.name+"-export.json",e.click()}),i("color")),c=(s.addEventListener("click",()=>{for(var e in o.color)document.documentElement.style.setProperty("--"+e,o.color[e]);for(var t of document.querySelectorAll("[data-fetch]"))fetchData(t,t.getAttribute("data-fetch"));localStorage.setItem("ffmpegWeb-currentTheme",o.custom);for(var n of document.querySelectorAll("[data-change]"))n.value=getComputedStyle(document.body).getPropertyValue("--"+n.getAttribute("data-change"))}),document.createElement("div"));o.custom.startsWith("a")||((a=i("delete")).addEventListener("click",()=>{for(let e=0;e<customTheme.themes.length;e++)customTheme.themes[e].custom===o.custom&&customTheme.themes.splice(e,1);setTimeout(()=>{e.remove()},300),localStorage.setItem("ffmpegWeb-customThemes",JSON.stringify(customTheme)),document.getElementById("themeOptions").style.maxHeight=parseInt(document.getElementById("themeOptions").style.maxHeight.replace("px",""))-55+"px"}),c.append(a)),t.append(n),c.style="display: flex; float: right",c.append(l,s),e.append(t,c),document.getElementById("themeOptions").append(e),document.getElementById("themeOptions").style.maxHeight=parseInt(document.getElementById("themeOptions").style.maxHeight.replace("px",""))+55+"px"}for(let e of document.querySelectorAll("[data-change]"))e.addEventListener("input",()=>{document.documentElement.style.setProperty("--"+e.getAttribute("data-change"),e.value)});document.querySelector("[data-change=select]").addEventListener("change",()=>{for(var e of document.querySelectorAll("[data-fetch]"))fetchData(e,e.getAttribute("data-fetch"))});let secTimeout=!1,currentTheme=(document.getElementById("saveTheme").addEventListener("click",()=>{var e;secTimeout?createAlert("Please wait a second.","secondWait"):(secTimeout=!0,setTimeout(()=>{secTimeout=!1},1e3),null!==(e=prompt("Choose the name of your new theme"))&&(customTheme.themes.push({name:e,color:{text:document.querySelector("[data-change=text]").value,background:document.querySelector("[data-change=background]").value,card:document.querySelector("[data-change=card]").value,row:document.querySelector("[data-change=row]").value,input:document.querySelector("[data-change=input]").value,select:document.querySelector("[data-change=select]").value},custom:(new Date).toISOString()}),addTheme(customTheme.themes[customTheme.themes.length-1]),localStorage.setItem("ffmpegWeb-currentTheme",customTheme.themes[customTheme.themes.length-1].custom),localStorage.setItem("ffmpegWeb-customThemes",JSON.stringify(customTheme)),createAlert("Theme saved and applied successfully! You can manage it from the 'Manage Themes' section above.")))}),document.getElementById("importTheme").addEventListener("click",()=>{let e=document.createElement("input");e.type="file",e.addEventListener("input",()=>{let o=new FileReader;o.addEventListener("load",()=>{var e=JSON.parse(o.result),t=["text","background","card","row","input","select"];if(void 0!==e.color){for(var n in e.color)/^#[0-9A-F]{6}$/i.test(e.color[n])&&-1!==t.indexOf(n)&&(document.querySelector(`[data-change=${n}]`).value=e.color[n],document.documentElement.style.setProperty("--"+n,e.color[n]));createAlert("Theme applied! Make sure to save it, so that you won't need to import it again.","appliedTheme")}}),o.readAsText(e.files[0])}),e.click()}),localStorage.getItem("ffmpegWeb-currentTheme"));if(null!==currentTheme)for(let t of finalObj.themes)if(t.custom===currentTheme){for(let e in t.color)document.documentElement.style.setProperty("--"+e,t.color[e]);for(let e of document.querySelectorAll("[data-fetch]"))fetchData(e,e.getAttribute("data-fetch"))}for(let e of document.querySelectorAll("[data-change]"))e.value=getComputedStyle(document.body).getPropertyValue("--"+e.getAttribute("data-change"));null===localStorage.getItem("ffmpegWeb-alertDuration")&&localStorage.setItem("ffmpegWeb-alertDuration","5000");let oldAlert=void 0;function createAlert(t,n){if("b"!==localStorage.getItem("ffmpegWeb-showAlert")&&(null===localStorage.getItem("ffmpegWeb-ignoredAlert")||-1===localStorage.getItem("ffmpegWeb-ignoredAlert").split(",").indexOf(n))){let e=document.createElement("div");e.classList.add("totalCenter","fill","opacity");var o,i=document.createElement("div"),a=(i.classList.add("alert"),document.createElement("div")),l=(a.classList.add("verticalcenter"),document.createElement("l")),t=(l.textContent=t,l.style.width="75%",document.createElement("img")),s=(t.style="width: 25px; height: 25px; margin-right: 10px;",fetchData(t,"alert"),document.createElement("l"));s.style="text-decoration: underline; display: flex; justify-content: flex-end; width: 25%",s.textContent="Don't show again",s.addEventListener("click",()=>{null===localStorage.getItem("ffmpegWeb-ignoredAlert")?localStorage.setItem("ffmpegWeb-ignoredAlert",n+","):localStorage.setItem("ffmpegWeb-ignoredAlert",""+localStorage.getItem("ffmpegWeb-ignoredAlert")+n+","),r(e)}),a.append(t,l,s),i.append(a),e.append(i),void 0!==oldAlert?(r(oldAlert),setTimeout(()=>{c()},300)):c(),oldAlert=e,c(),setTimeout(()=>r(e),parseInt(localStorage.getItem("ffmpegWeb-alertDuration")));for(o of[s,t])addHoverEvents(o);function c(){document.body.append(e),setTimeout(()=>{e.style.opacity="1"})}function r(e){e.style.opacity="0",setTimeout(()=>{e.remove(),oldAlert=void 0},400)}}}createAlert("Loading ffmpeg. The 'Select files' button will be disabled until it has been loaded.","ffmpegLoading"),document.getElementById("btnSelect").classList.add("disabled"),ffmpeg.isLoaded()||ffmpeg.load().then(()=>{createAlert("Loaded ffmpeg successfully!","ffmpegSuccessful"),document.getElementById("btnSelect").classList.remove("disabled")});let installationPrompt;function scrollItem(e){let t=[["pwaPromote","redownload"],["Left","Right"]];e&&(t[0].reverse(),t[1].reverse()),document.getElementById(t[0][0]).classList.add("animate__animated","animate__backOut"+t[1][0]),setTimeout(()=>{document.getElementById(t[0][0]).style.display="none",document.getElementById(t[0][0]).classList.remove("animate__animated","animate__backOut"+t[1][0]),document.getElementById(t[0][1]).style.display="inline",document.getElementById(t[0][1]).classList.add("animate__animated","animate__backIn"+t[1][1])},510)}function getLicense(e,t){return"hippocratic"!==e?`MIT License<br><br>Copyright (c) ${t}<br><br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. <br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.`:t+" (“Licensor”)<br><br>Hippocratic License Version Number: 2.1.<br><br>Purpose. The purpose of this License is for the Licensor named above to permit the Licensee (as defined below) broad permission, if consistent with Human Rights Laws and Human Rights Principles (as each is defined below), to use and work with the Software (as defined below) within the full scope of Licensor’s copyright and patent rights, if any, in the Software, while ensuring attribution and protecting the Licensor from liability.<br><br>Permission and Conditions. The Licensor grants permission by this license (“License”), free of charge, to the extent of Licensor’s rights under applicable copyright and patent law, to any person or entity (the “Licensee”) obtaining a copy of this software and associated documentation files (the “Software”), to do everything with the Software that would otherwise infringe (i) the Licensor’s copyright in the Software or (ii) any patent claims to the Software that the Licensor can license or becomes able to license, subject to all of the following terms and conditions:<br><br>* Acceptance. This License is automatically offered to every person and entity subject to its terms and conditions. Licensee accepts this License and agrees to its terms and conditions by taking any action with the Software that, absent this License, would infringe any intellectual property right held by Licensor.<br><br>* Notice. Licensee must ensure that everyone who gets a copy of any part of this Software from Licensee, with or without changes, also receives the License and the above copyright notice (and if included by the Licensor, patent, trademark and attribution notice). Licensee must cause any modified versions of the Software to carry prominent notices stating that Licensee changed the Software. For clarity, although Licensee is free to create modifications of the Software and distribute only the modified portion created by Licensee with additional or different terms, the portion of the Software not modified must be distributed pursuant to this License. If anyone notifies Licensee in writing that Licensee has not complied with this Notice section, Licensee can keep this License by taking all practical steps to comply within 30 days after the notice. If Licensee does not do so, Licensee’s License (and all rights licensed hereunder) shall end immediately.<br><br>* Compliance with Human Rights Principles and Human Rights Laws.<br><br>    1. Human Rights Principles.<br><br>        (a) Licensee is advised to consult the articles of the United Nations Universal Declaration of Human Rights and the United Nations Global Compact that define recognized principles of international human rights (the “Human Rights Principles”). Licensee shall use the Software in a manner consistent with Human Rights Principles.<br><br>        (b) Unless the Licensor and Licensee agree otherwise, any dispute, controversy, or claim arising out of or relating to (i) Section 1(a) regarding Human Rights Principles, including the breach of Section 1(a), termination of this License for breach of the Human Rights Principles, or invalidity of Section 1(a) or (ii) a determination of whether any Law is consistent or in conflict with Human Rights Principles pursuant to Section 2, below, shall be settled by arbitration in accordance with the Hague Rules on Business and Human Rights Arbitration (the “Rules”); provided, however, that Licensee may elect not to participate in such arbitration, in which event this License (and all rights licensed hereunder) shall end immediately. The number of arbitrators shall be one unless the Rules require otherwise.<br><br>        Unless both the Licensor and Licensee agree to the contrary: (1) All documents and information concerning the arbitration shall be public and may be disclosed by any party; (2) The repository referred to under Article 43 of the Rules shall make available to the public in a timely manner all documents concerning the arbitration which are communicated to it, including all submissions of the parties, all evidence admitted into the record of the proceedings, all transcripts or other recordings of hearings and all orders, decisions and awards of the arbitral tribunal, subject only to the arbitral tribunal's powers to take such measures as may be necessary to safeguard the integrity of the arbitral process pursuant to Articles 18, 33, 41 and 42 of the Rules; and (3) Article 26(6) of the Rules shall not apply.<br><br>    2. Human Rights Laws. The Software shall not be used by any person or entity for any systems, activities, or other uses that violate any Human Rights Laws.  “Human Rights Laws” means any applicable laws, regulations, or rules (collectively, “Laws”) that protect human, civil, labor, privacy, political, environmental, security, economic, due process, or similar rights; provided, however, that such Laws are consistent and not in conflict with Human Rights Principles (a dispute over the consistency or a conflict between Laws and Human Rights Principles shall be determined by arbitration as stated above).  Where the Human Rights Laws of more than one jurisdiction are applicable or in conflict with respect to the use of the Software, the Human Rights Laws that are most protective of the individuals or groups harmed shall apply.<br><br>    3. Indemnity. Licensee shall hold harmless and indemnify Licensor (and any other contributor) against all losses, damages, liabilities, deficiencies, claims, actions, judgments, settlements, interest, awards, penalties, fines, costs, or expenses of whatever kind, including Licensor’s reasonable attorneys’ fees, arising out of or relating to Licensee’s use of the Software in violation of Human Rights Laws or Human Rights Principles.<br><br>* Failure to Comply. Any failure of Licensee to act according to the terms and conditions of this License is both a breach of the License and an infringement of the intellectual property rights of the Licensor (subject to exceptions under Laws, e.g., fair use). In the event of a breach or infringement, the terms and conditions of this License may be enforced by Licensor under the Laws of any jurisdiction to which Licensee is subject. Licensee also agrees that the Licensor may enforce the terms and conditions of this License against Licensee through specific performance (or similar remedy under Laws) to the extent permitted by Laws. For clarity, except in the event of a breach of this License, infringement, or as otherwise stated in this License, Licensor may not terminate this License with Licensee.<br><br>* Enforceability and Interpretation. If any term or provision of this License is determined to be invalid, illegal, or unenforceable by a court of competent jurisdiction, then such invalidity, illegality, or unenforceability shall not affect any other term or provision of this License or invalidate or render unenforceable such term or provision in any other jurisdiction; provided, however, subject to a court modification pursuant to the immediately following sentence, if any term or provision of this License pertaining to Human Rights Laws or Human Rights Principles is deemed invalid, illegal, or unenforceable against Licensee by a court of competent jurisdiction, all rights in the Software granted to Licensee shall be deemed null and void as between Licensor and Licensee. Upon a determination that any term or provision is invalid, illegal, or unenforceable, to the extent permitted by Laws, the court may modify this License to affect the original purpose that the Software be used in compliance with Human Rights Principles and Human Rights Laws as closely as possible. The language in this License shall be interpreted as to its fair meaning and not strictly for or against any party.<br><br> * Disclaimer. TO THE FULL EXTENT ALLOWED BY LAW, THIS SOFTWARE COMES “AS IS,” WITHOUT ANY WARRANTY, EXPRESS OR IMPLIED, AND LICENSOR AND ANY OTHER CONTRIBUTOR SHALL NOT BE LIABLE TO ANYONE FOR ANY DAMAGES OR OTHER LIABILITY ARISING FROM, OUT OF, OR IN CONNECTION WITH THE SOFTWARE OR THIS LICENSE, UNDER ANY KIND OF LEGAL CLAIM.<br><br>This Hippocratic License is an Ethical Source license (https://ethicalsource.dev) and is offered for use by licensors and licensees at their own risk, on an “AS IS” basis, and with no warranties express or implied, to the maximum extent permitted by Laws."}window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),installationPrompt=e}),document.getElementById("pwaInstall").addEventListener("click",()=>{installationPrompt.prompt(),installationPrompt.userChoice.then(e=>{"accepted"===e.outcome&&scrollItem()})}),window.matchMedia("(display-mode: standalone)").matches&&scrollItem(),document.getElementById("alertDuration").addEventListener("input",()=>{localStorage.setItem("ffmpegWeb-alertDuration",document.getElementById("alertDuration").value)}),document.getElementById("resetBtn").addEventListener("click",()=>{localStorage.setItem("ffmpegWeb-ignoredAlert",""),createAlert("All the alerts are now visible","alertVisible")}),document.getElementById("alertAsk").addEventListener("input",()=>{document.getElementById("alertAsk").checked?(localStorage.setItem("ffmpegWeb-showAlert","a"),document.getElementById("alertOptions").style.display="block",setTimeout(()=>{document.getElementById("alertOptions").style.maxHeight="9999px"},15)):(localStorage.setItem("ffmpegWeb-showAlert","b"),document.getElementById("alertOptions").style.maxHeight="0px",setTimeout(()=>{document.getElementById("alertOptions").style.display="none"},350))}),"b"===localStorage.getItem("ffmpegWeb-showAlert")&&(document.getElementById("alertOptions").style.maxHeight="0px",document.getElementById("alertOptions").style.display="none",document.getElementById("alertAsk").checked=!1),null!==localStorage.getItem("ffmpegWeb-alertDuration")&&(document.getElementById("alertDuration").value=parseInt(localStorage.getItem("ffmpegWeb-alertDuration")));for(let e of document.querySelectorAll("[data-license]"))e.addEventListener("click",()=>{document.getElementById("selectedLicense").innerHTML=getLicense(e.getAttribute("data-license"),e.getAttribute("data-author")),null!==document.querySelector(".licenseSelect")&&document.querySelector(".licenseSelect").classList.remove("licenseSelect"),e.classList.add("licenseSelect")});